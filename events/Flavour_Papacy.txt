namespace = papacy

country_event = { #Investiture good pope do their job
	id = papacy.1
	title = papacy.1.t
	desc = papacy.1.d
	picture = POPE_PREACHING_eventPicture
	
	trigger = {
		tag = PAP
		emperor = {
			NOT = {
				has_ruler_modifier = pope_likes_emperor
			}
			NOT = {
				has_ruler_modifier = pope_dislikes_emperor
			}
		}
	}

	mean_time_to_happen = {
		months = 2
	}

	option = {
		name = papacy.1a
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0.5
				ruler_has_personality = sinner_personality
			}
			modifier = {
				factor = 5
				emperor = {
					is_papal_controller = yes
				}
			}
		}
		emperor = {
			add_ruler_modifier = {
				name = pope_likes_emperor
			}
		}
		add_5_p_a = yes
		sinful_emperor_endorsed = yes
		faithful_emperor_endorsed = yes	
	}
	option = {
		name = papacy.1b
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				ruler_has_personality = cruel_personality
			}
		}
		emperor = {
			add_ruler_modifier = {
				name = pope_dislikes_emperor
			}
			country_event = {
				id = papacy.2
				days = 7
			}
		}
		sinful_emperor_denied = yes
		faithful_emperor_denied = yes
	}
}


country_event = { #Investiture Emperor mad
	id = papacy.2
	title = papacy.2.t
	desc = papacy.2.d
	picture = POPE_PREACHING_eventPicture
	
	is_triggered_only = yes

	option = {
		name = papacy.2a
		add_treasury = -100
		PAP = {
			country_event = {
				id = papacy.4
			}
		}
	}
	option = {
		name = papacy.2b
		highlight = yes
		trigger = {
			papal_influence = 50
		}
		add_papal_influence = -50
		PAP = {
			add_papal_influence = 50
		}
		remove_country_modifier = pope_dislikes_emperor
		add_ruler_modifier = {
			name = pope_likes_emperor
		}
	}
	option = {
		name = papacy.2c
		highlight = yes
		trigger = {
			is_papal_controller = yes
		}
		remove_country_modifier = pope_dislikes_emperor
		add_ruler_modifier = {
			name = pope_likes_emperor
		}
	}
}

country_event = { #promote celibacy among the clergy
	id = papacy.3
	title = papacy.3.t
	desc = papacy.3.d
	picture = POPE_PREACHING_eventPicture
	
	is_triggered_only = yes

	option = {
		name = papacy.3a
		add_5_p_a = yes
	}
	option = {
		name = papacy.3b
		add_curia_treasury = 1000
	}
}

country_event = { #reasonable response
	id = papacy.4
	title = papacy.4.t
	desc = papacy.4.d
	picture = POPE_PREACHING_eventPicture
	
	is_triggered_only = yes

	option = {
		name = papacy.4a
		add_treasury = 100
		emperor = {
			remove_country_modifier = pope_dislikes_emperor
			add_ruler_modifier = {
				name = pope_likes_emperor
			}
		}
	}
	option = {
		name = papacy.4b
		emperor = {
			remove_country_modifier = pope_dislikes_emperor
			add_ruler_modifier = {
				name = pope_likes_emperor
			}
		}
	}
	option = {
		name = papacy.4b
		excommunicate = emperor
		custom_tooltip = PAP_WAR_IN_EARTH
	}
}

country_event = { #HMM what are you doing step Pope?
	id = papacy.5
	title = papacy.5.t
	desc = papacy.5.d
	picture = POPE_PREACHING_eventPicture
	
	trigger = {
		has_government_mechanic = saints_and_sinners
		emperor = {
			has_country_modifier = pope_dislikes_emperor
			is_excommunicated = yes
		}
		OR = {
			has_government_power = {
				mechanic_type = saints_and_sinners
				power_type = nice_or_naughty
				value = 50
			}
			NOT = {
				has_government_power = {
					mechanic_type = saints_and_sinners
					power_type = nice_or_naughty
					value = -50
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 24
	}
	after = {
		hidden_effect = {
			REB = {
				if = {
					limit = { curia_treasury_size = 100 }
					set_variable = { which = pont_cash_bank_var value = 100 }
				}
				if = {
					limit = { curia_treasury_size = 1000 }
					set_variable = { which = pont_cash_bank_var value = 1000 }
				}
				if = {
					limit = { curia_treasury_size = 2000 }
					set_variable = { which = pont_cash_bank_var value = 2000 }
				}
				if = {
					limit = { curia_treasury_size = 3000 }
					set_variable = { which = pont_cash_bank_var value = 3000 }
				}
				if = {
					limit = { curia_treasury_size = 4000 }
					set_variable = { which = pont_cash_bank_var value = 4000 }
				}
				if = {
					limit = { curia_treasury_size = 5000 }
					set_variable = { which = pont_cash_bank_var value = 5000 }
				}
				if = {
					limit = { curia_treasury_size = 6000 }
					set_variable = { which = pont_cash_bank_var value = 6000 }
				}
				if = {
					limit = { curia_treasury_size = 7000 }
					set_variable = { which = pont_cash_bank_var value = 7000 }
				}
				if = {
					limit = { curia_treasury_size = 10000 }
					set_variable = { which = pont_cash_bank_var value = 10000 }
				}
			}
		}
	}
	option = {
		name = papacy.5a
		trigger = {
			has_government_power = {
				mechanic_type = saints_and_sinners
				power_type = nice_or_naughty
				value = 50
			}
		}
		change_tag = PA0
		change_religion = pontifex
		custom_tooltip = PAP_WAR_IN_EARTH_2
		hidden_effect = {
			set_country_flag = papal_favor_var_set
			set_variable = {
				which = papal_favor_var
				value = 0
			}
			every_owned_province = {
				limit = {
					religion = catholic
				}
				change_religion = pontifex
			}
			every_subject_country = {
				limit = {
					religion = catholic
				}
				change_religion = pontifex
				every_owned_province = {
					limit = {
						religion = catholic
					}
					change_religion = pontifex
				}
			}
			every_known_country = {
				limit = {
					has_opinion = {
						who = ROOT
						value = 130
					}
				}
				change_religion = pontifex
				every_owned_province = {
					limit = {
						religion = catholic
					}
					change_religion = pontifex
				}
			}
		}
	}
	option = {
		name = papacy.5b
		trigger = {
			NOT = {
				has_government_power = {
					mechanic_type = saints_and_sinners
					power_type = nice_or_naughty
					value = -50
				}
			}
		}
		change_tag = PA0
		change_religion = pontifex
		custom_tooltip = PAP_WAR_IN_EARTH_3
		hidden_effect = {
			every_owned_province = {
				limit = {
					religion = catholic
				}
				change_religion = pontifex
			}
			every_subject_country = {
				limit = {
					religion = catholic
				}
				change_religion = pontifex
				every_owned_province = {
					limit = {
						religion = catholic
					}
					change_religion = pontifex
				}
			}
			every_known_country = {
				limit = {
					has_opinion = {
						who = ROOT
						value = 180
					}
				}
				change_religion = pontifex
				every_owned_province = {
					limit = {
						religion = catholic
					}
					change_religion = pontifex
				}
			}
		}
	}
}

country_event = { #select the next POPE
	id = papacy.6
	title = papacy.6.t
	desc = papacy.6.d
	picture = POPE_PREACHING_eventPicture
	
	trigger = {
		OR = {
			has_reform = papal_monarchy_evil
			has_reform = papal_monarchy_good
		}
		has_heir = no
	}

	mean_time_to_happen = {
		months = 24
	}

	option = {
		name = papacy.6a
		define_heir = {
			max_random_adm = 3
			max_random_dip = 5
			max_random_mil = 6
		}
	}
	option = {
		name = papacy.6b
		define_heir = {
			max_random_adm = 5
			max_random_dip = 6
			max_random_mil = 3
		}
	}
	option = {
		name = papacy.6c
		define_heir = {
			max_random_adm = 6
			max_random_dip = 5
			max_random_mil = 3
		}
	}
}

country_event = { #ANTIPOPE TIME
	id = papacy.7
	title = papacy.7.t
	desc = papacy.7.d
	picture = POPE_PREACHING_eventPicture
	
	is_triggered_only = yes

	option = {
		name = papacy.7a
		random_owned_province = {
			limit = {
				is_capital = no
			}
			cede_province = PAP
			add_core = PAP
			emperor = {
				vassalize = PAP
			}
			hidden_effect = {
				PA0 = {
					every_core_province = {
						add_core = PAP
					}
				}
			}
		}
	}
	option = {
		name = papacy.7b
		trigger = {
			owns = 118
		}
		118 = {
			cede_province = PAP
			add_core = PAP
			emperor = {
				vassalize = PAP
			}
			hidden_effect = {
				PA0 = {
					every_core_province = {
						add_core = PAP
					}
				}
			}
		}
	}
	option = {
		name = papacy.7c
		trigger = {
			owns = 4951
		}
		4951 = {
			cede_province = PAP
			add_core = PAP
			emperor = {
				vassalize = PAP
			}
			hidden_effect = {
				PA0 = {
					every_core_province = {
						add_core = PAP
					}
				}
			}
		}
	}
}

country_event = { #expand Pontifexian, anger the Emperor
	id = papacy.8
	title = papacy.8.t
	desc = papacy.8.d
	picture = POPE_PREACHING_eventPicture
	
	trigger = {
		tag = PA0
		hre_leagues_enabled = yes
		hre_religion_locked = no
		hre_religion_treaty = no
	}

	mean_time_to_happen = {
		months = 24
	}

	option = {
		name = papacy.8a
		every_country = {
			limit = {
				religion = catholic
				in_league = pontifex
			}
			custom_tooltip = PAP_TT_2
			hidden_effect = {
				every_owned_province = {
					limit = {
						religion = catholic
					}
					change_religion = pontifex
				}
				every_subject_country = {
					limit = {
						religion = catholic
					}
					change_religion = pontifex
					every_owned_province = {
						limit = {
							religion = catholic
						}
						change_religion = pontifex
					}
				}
			}
		}
	}
}

country_event = { #Your Papal State is Evolving?! part Pontifex
	id = papacy.9
	title = papacy.9.t
	desc = papacy.9.d
	picture = POPE_PREACHING_eventPicture
	
	is_triggered_only = yes
	after = {
		hidden_effect = {
			swap_non_generic_missions = yes
		}
	}
	option = {
		name = papacy.9a
		trigger = {
			has_reform = papal_monarchy_good
		}
		override_country_name = ITA_FEDERATION
		add_country_modifier = {
			name = pap_ita_federation
			duration = -1
		}
		set_country_flag = pap_mt_ita_fed
	}
	option = {
		name = papacy.9b
		trigger = {
			has_reform = papal_monarchy_evil
		}
		override_country_name = GOD_KINGDOM
		add_country_modifier = {
			name = pap_god_kingdom
			duration = -1
		}
		set_country_flag = pap_mt_god_king
	}
	option = {
		name = papacy.9c
		trigger = {
			has_reform = papal_monarchy_good
		}
		override_country_name = GOD_KINGDOM
		add_country_modifier = {
			name = pap_god_kingdom
			duration = -1
		}
		set_country_flag = pap_mt_god_king
	}
}

country_event = { #Your Papal State is Evolving?! part Catholic
	id = papacy.10
	title = papacy.10.t
	desc = papacy.10.d
	picture = POPE_PREACHING_eventPicture
	
	is_triggered_only = yes
	after = {
		hidden_effect = {
			swap_non_generic_missions = yes
		}
	}
	option = {
		name = papacy.10a
		override_country_name = ITA_FEDERATION
		add_country_modifier = {
			name = pap_ita_federation_cath
			duration = -1
		}
		set_country_flag = pap_mt_ita_fed
	}
	option = {
		name = papacy.10b
		override_country_name = GOD_KINGDOM
		add_country_modifier = {
			name = pap_god_kingdom_cath
			duration = -1
		}
		set_country_flag = pap_mt_god_king
	}
}

country_event = { #mission to JONGWA
	id = papacy.11
	title = papacy.11.t
	desc = papacy.11.d
	picture = POPE_PREACHING_eventPicture
	
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					tag = PAP
				}
				random_country = {
					limit = { is_emperor_of_china = yes }
					set_country_flag = Jonwa_catholic
				}
			}
		}
	}
	option = {
		name = papacy.11a
		add_years_of_income = -1
		random_country = {
			limit = { is_emperor_of_china = yes }
			country_event = {
				id = papacy.12
			}
		}
	}
	option = {
		name = papacy.11b
		add_years_of_income = -1.5
		random_country = {
			limit = { is_emperor_of_china = yes }
			set_country_flag = jonwa_high_chance_flag
			country_event = {
				id = papacy.12
			}
		}
	}
	option = {
		name = papacy.11c
		add_years_of_income = -2
		random_country = {
			limit = { is_emperor_of_china = yes }
			set_country_flag = jonwa_higher_chance_flag
			country_event = {
				id = papacy.12
			}
		}
	}
}

country_event = { #mission to JONGWA
	id = papacy.12
	title = papacy.12.t
	desc = papacy.12.d
	picture = POPE_PREACHING_eventPicture
	
	is_triggered_only = yes
	after = {
		clr_country_flag = jonwa_high_chance_flag
		clr_country_flag = jonwa_higher_chance_flag
		clr_country_flag = Jonwa_catholic
	}
	option = {
		name = papacy.12a
		ai_chance = {
			factor = 0
		}
		if = {
			limit = {
				has_country_flag = Jonwa_catholic
			}
			change_religion = PAP
			random_owned_province = {
				limit = { has_port = yes}
				change_religion = PAP
			}
		}else = {
			change_religion = PA0
			random_owned_province = {
				limit = { has_port = yes}
				change_religion = PA0
			}
		}
	}
	option = {
		name = papacy.12b
		ai_chance = {
			factor = 30
			modifier = {
				factor = 2
				has_country_flag = jonwa_high_chance_flag
			}
			modifier = {
				factor = 4
				has_country_flag = jonwa_higher_chance_flag
			}
		}
		if = {
			limit = {
				has_country_flag = Jonwa_catholic
			}
			random_owned_province = {
				limit = { has_port = yes}
				change_religion = PAP
				add_permanent_province_modifier = {
					name = pap_jonwa_welcome
					duration = 10950
				}
			}
		}else = {
			random_owned_province = {
				limit = { has_port = yes}
				change_religion = PA0
				add_permanent_province_modifier = {
					name = pap_jonwa_welcome
					duration = 10950
				}
			}
		}
	}
	option = {
		name = papacy.12c
		ai_chance = {
			factor = 70
		}
		if = {
			limit = {
				has_country_flag = Jonwa_catholic
			}
			random_owned_province = {
				limit = { has_port = yes}
				change_religion = PAP
				add_permanent_province_modifier = {
					name = pap_jonwa_persecution
					duration = 10950
				}
			}
		}else = {
			random_owned_province = {
				limit = { has_port = yes}
				change_religion = PA0
				add_permanent_province_modifier = {
					name = pap_jonwa_persecution
					duration = 10950
				}
			}
		}
	}
}


country_event = { #mission to JONGWA
	id = papacy.13
	title = papacy.13.t
	desc = papacy.13.d
	picture = POPE_PREACHING_eventPicture
	
	mean_time_to_happen = {
		months = 12
	}
	trigger = {
		any_owned_province = {
			OR = {
				religion = PAP
				religion = PA0
			}
		}
	}
	option = {
		name = papacy.13a
		ai_chance = {factor = 50}
		if = {
			limit = {
				any_owned_province = {
					religion = PAP
				}
			}
			random_owned_province = {
				limit = { 
					any_neighbor_province = {
						religion = PAP
					}
				}
				change_religion = PAP
			}
		}else = {
			random_owned_province = {
				limit = { 
					any_neighbor_province = {
						religion = PA0
					}
				}
				change_religion = PA0
			}
		}
	}
	option = {
		name = papacy.13b
		ai_chance = {factor = 50}
		add_adm_power = -100
	}
}





country_event = { #All papal vassals gain this modifiers
	id = papacy.100
	title = papacy.100.t
	desc = papacy.100.d
	picture = POPE_PREACHING_eventPicture
	hidden = yes
	trigger = {
		ai = yes
		overlord = {
			mission_completed = pap_clerical_positions
		}
		NOT = {
			has_country_modifier = pap_good_intentions_3
		}
	}
	
	option = {
		name = papacy.10a
		add_country_modifier = {
			name = pap_good_intentions_3
			duration = -1
		}
	}
}

country_event = { #All papal vassals gain this modifiers
	id = papacy.101
	title = papacy.101.t
	desc = papacy.101.d
	picture = POPE_PREACHING_eventPicture
	hidden = yes
	trigger = {
		ai = yes
		OR = {
			NOT = {
				overlord = {
					mission_completed = pap_clerical_positions
				}
			}
			is_free_or_tributary_trigger = yes
		}
		has_country_modifier = pap_good_intentions_3
	}
	
	option = {
		name = papacy.10a
		remove_country_modifier = pap_good_intentions_3
	}
}


country_event = { #Pontifex flavor events
	id = papacy.1000
	title = papacy.1000.t
	desc = papacy.1000.d
	picture = POPE_PREACHING_eventPicture
	trigger = {
		religion = pontifex
		NOT = {
			tag = PA0
		}
	}
	mean_time_to_happen = {
		months = 200
	}
	option = {
		name = papacy.1000a
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = -5
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -5
		}
		change_variable = {
			which = pont_cash_bank_var
			which = 500
		}
	}
	option = {
		name = papacy.1000b
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
	}
	option = {
		name = papacy.1000c
		trigger = {
			full_idea_group = religious_ideas
		}
		add_years_of_income = 0.3
		change_variable = {
			which = pont_cash_bank_var
			which = 200
		}
	}
}

country_event = { #Pontifex flavor events
	id = papacy.1001
	title = papacy.1001.t
	desc = papacy.1001.d
	picture = POPE_PREACHING_eventPicture
	trigger = {
		religion = pontifex
		NOT = {
			tag = PA0
		}
		check_variable = {
			which = papal_favor_var
			value = 5
		}
	}
	mean_time_to_happen = {
		months = 200
	}
	option = {
		name = papacy.1001a
		subtract_variable = {
			which = papal_favor_var
			value = 5
		}
	}
	option = {
		name = papacy.1001b
		add_adm_power = -50
		add_dip_power = -50
	}
	option = {
		name = papacy.1001c
		trigger = {
			full_idea_group = religious_ideas
		}
		change_variable = {
			which = papal_favor_var
			value = 5
		}
	}
}

country_event = { #Pontifex flavor events
	id = papacy.1002
	title = papacy.1002.t
	desc = papacy.1002.d
	picture = POPE_PREACHING_eventPicture
	trigger = {
		religion = pontifex
		NOT = {
			tag = PA0
		}
	}
	mean_time_to_happen = {
		months = 200
	}
	option = {
		name = papacy.1002a
		change_variable = {
			which = papal_favor_var
			value = 5
		}
	}
	option = {
		name = papacy.1002b
		add_adm_power = 100
	}
	option = {
		name = papacy.1002c
		trigger = {
			full_idea_group = religious_ideas
		}
		add_adm_power = 50
		change_variable = {
			which = papal_favor_var
			value = 5
		}
	}
}
country_event = { #pope calls crusade!
	id = papacy.1003
	title = papacy.1003.t
	desc = papacy.1003.d
	picture = POPE_PREACHING_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = papacy.1003.a
		
		add_country_modifier = {
			name = pap_new_crusade
			duration = 5475
		}
	}
}