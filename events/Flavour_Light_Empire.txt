namespace = light_emp

country_event = {
	id = light_emp.1
	title = light_emp.1.test
	desc = light_emp.1.desc
	picture = CRUSADER_HORDE_eventPicture
	trigger = {
		tag = LE0
	}
	fire_only_once = yes
	hidden = yes
	option = {
		name = redleg.1a
		save_global_event_target_as = light_empire_shield_target
		REB = {
			save_global_event_target_as = darkness_enemy_target
		}
		if = {
			limit = {
				ai = yes
			}
			add_country_modifier = {
				name = less_angry_empire
				duration = 10850
			}
		}
	}
}


country_event = {
	id = light_emp.2
	title = light_emp.2.test
	desc = light_emp.2.desc
	picture = CRUSADER_HORDE_eventPicture
	trigger = {
		OR = {
			tag = LE0
			is_subject_of_type_with_overlord = {
				who = LE0
				type = light_empire_vassal
			}
		}
		OR = {
			religion = manich
			religion = jyotisastra
		}
		has_global_flag = decree_eol_2_done
	}
	hidden = yes
	option = {
		name = redleg.1a
		random_owned_province = {
			limit = {
				NOT = {
					religion = ROOT
				}
			}
			change_religion = ROOT
		}
	}
}

country_event = {
	id = light_emp.3
	title = light_emp.3.test
	desc = light_emp.3.desc
	picture = CRUSADER_HORDE_eventPicture
	is_triggered_only = yes
	hidden = yes
	option = {
		name = redleg.1a
		event_target:light_empire_shield_target = {
			inherit = ROOT
		}
	}
}

country_event = {
	id = light_emp.4
	title = light_emp.4.test
	desc = light_emp.4.desc
	picture = CRUSADER_HORDE_eventPicture
	is_triggered_only = yes
	hidden = yes
	option = {
		name = redleg.1a
		every_core_province = {
			add_core = event_target:light_empire_shield_target
		}
		overlord = {
			free_vassal = ROOT
		}
	}
}

country_event = { #Challenge emperor how you want it
	id = light_emp.5
	title = light_emp.5.test
	desc = light_emp.5.desc
	picture = CRUSADER_HORDE_eventPicture
	is_triggered_only = yes
	option = {
		name = light_emp.5a
		save_global_event_target_as = light_empire_challenger_target
		event_target:light_empire_shield_target = {
			country_event = {
				id = light_emp.6
			}
		}
		
	}
	option = {
		name = light_emp.5b
		if = {
			limit = {
				has_government_power = {
					mechanic_type = emp_of_light_point_mechanic
					power_type = enlightened_prestige_points
					value = 30
				}
			}
			add_government_power = {
					mechanic_type = emp_of_light_point_mechanic
					power_type = enlightened_prestige_points
					value = -30
				}
				save_global_event_target_as = light_empire_challenger_target
			event_target:light_empire_shield_target = {
				set_country_flag = medium_bias_eol
				country_event = {
					id = light_emp.6
				}
			}
		}else = {
			custom_tooltip = EOL_TT_2a
		}
	}
	option = {
		name = light_emp.5c
		if = {
			limit = {
				has_government_power = {
					mechanic_type = emp_of_light_point_mechanic
					power_type = enlightened_prestige_points
					value = 50
				}
			}
			add_government_power = {
					mechanic_type = emp_of_light_point_mechanic
					power_type = enlightened_prestige_points
					value = -50
				}
				save_global_event_target_as = light_empire_challenger_target
			event_target:light_empire_shield_target = {
				set_country_flag = easy_bias_eol
				country_event = {
					id = light_emp.6
				}
			}
		}else = {
			custom_tooltip = EOL_TT_2b
		}
	}
	option = {
		name = light_emp.5d
		
	}
}

country_event = { #Emperor has to respong
	id = light_emp.6
	title = light_emp.6.test
	desc = light_emp.6.desc
	picture = CRUSADER_HORDE_eventPicture
	is_triggered_only = yes
	option = {
		name = light_emp.6a
		ai_chance = {
			factor = 10
		}
		event_target:light_empire_challenger_target = {
			country_event = {
				id = light_emp.7
			}
		}
	}
	option = {
		name = light_emp.6b
		trigger = {
			has_country_flag = medium_bias_eol
		}
		ai_chance = {
			factor = 50
		}
		event_target:light_empire_challenger_target = {
			country_event = {
				id = light_emp.7
			}
		}
	}
	option = {
		name = light_emp.6c
		trigger = {
			has_country_flag = easy_bias_eol
		}
		ai_chance = {
			factor = 70
		}
		event_target:light_empire_challenger_target = {
			country_event = {
				id = light_emp.7
			}
		}
	}
	option = {
		name = light_emp.6d
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				has_country_flag = easy_bias_eol
			}
		}
		declare_war_with_cb = {
			casus_belli = cb_leo_expand_empire
			who = event_target:light_empire_challenger_target
		}
	}
}

country_event = { #response back to player
	id = light_emp.7
	title = light_emp.7.test
	desc = light_emp.7.desc
	picture = CRUSADER_HORDE_eventPicture
	is_triggered_only = yes
	option = {
		name = light_emp.7a
		inherit = event_target:light_empire_shield_target
		save_global_event_target_as = light_empire_shield_target
		override_country_name = LE0
		hidden_effect = {
			change_country_color = {
				country = LE0
			}
		}
	}
}


country_event = { #AI getting decrees Number 1 
	id = light_emp.8
	title = light_emp.8.test
	desc = light_emp.8.desc
	picture = CRUSADER_HORDE_eventPicture
	
	trigger = {
		ai = yes
		tag = event_target:light_empire_shield_target
		OR = {
			has_government_power = {
				mechanic_type = emp_of_light_point_mechanic
				power_type = enlightened_prestige_points
				value = 30
			}
			is_year = 1490
		}
	}
	mean_time_to_happen = {
		months = 240
	}

	option = {
		name = light_emp.8a
		add_government_power = {
				mechanic_type = emp_of_light_point_mechanic
				power_type = enlightened_prestige_points
				value = -30
			}
		set_global_flag = decree_eol_1_done
	}
}

country_event = { #AI getting decrees Number 2 
	id = light_emp.9
	title = light_emp.9.test
	desc = light_emp.9.desc
	picture = CRUSADER_HORDE_eventPicture
	
	trigger = {
		ai = yes
		tag = event_target:light_empire_shield_target
		OR = {
			has_government_power = {
				mechanic_type = emp_of_light_point_mechanic
				power_type = enlightened_prestige_points
				value = 30
			}
			is_year = 1520
		}
		has_global_flag = decree_eol_1_done
	}
	mean_time_to_happen = {
		months = 240
	}

	option = {
		name = light_emp.9a
		add_government_power = {
				mechanic_type = emp_of_light_point_mechanic
				power_type = enlightened_prestige_points
				value = -30
			}
		set_global_flag = decree_eol_2_done
	}
}

country_event = { #AI getting decrees Number 3
	id = light_emp.10
	title = light_emp.10.test
	desc = light_emp.10.desc
	picture = CRUSADER_HORDE_eventPicture
	
	trigger = {
		ai = yes
		tag = event_target:light_empire_shield_target
		OR = {
			has_government_power = {
				mechanic_type = emp_of_light_point_mechanic
				power_type = enlightened_prestige_points
				value = 30
			}
			is_year = 1520
		}
		has_global_flag = decree_eol_2_done
	}
	mean_time_to_happen = {
		months = 240
	}

	option = {
		name = light_emp.10a
		add_government_power = {
				mechanic_type = emp_of_light_point_mechanic
				power_type = enlightened_prestige_points
				value = -30
			}
		set_global_flag = decree_eol_3_done
	}
}

country_event = { #AI getting decrees Number 4
	id = light_emp.11
	title = light_emp.11.test
	desc = light_emp.11.desc
	picture = CRUSADER_HORDE_eventPicture
	
	trigger = {
		ai = yes
		tag = event_target:light_empire_shield_target
		OR = {
			has_government_power = {
				mechanic_type = emp_of_light_point_mechanic
				power_type = enlightened_prestige_points
				value = 30
			}
			is_year = 1550
		}
		has_global_flag = decree_eol_3_done
	}
	mean_time_to_happen = {
		months = 240
	}

	option = {
		name = light_emp.11a
		add_government_power = {
				mechanic_type = emp_of_light_point_mechanic
				power_type = enlightened_prestige_points
				value = -30
			}
		set_global_flag = decree_eol_6_done
	}
}


country_event = { #AI getting decrees Number 5
	id = light_emp.12
	title = light_emp.12.test
	desc = light_emp.12.desc
	picture = CRUSADER_HORDE_eventPicture
	
	trigger = {
		ai = yes
		tag = event_target:light_empire_shield_target
		OR = {
			has_government_power = {
				mechanic_type = emp_of_light_point_mechanic
				power_type = enlightened_prestige_points
				value = 30
			}
			is_year = 1590
		}
		has_global_flag = decree_eol_6_done
	}
	mean_time_to_happen = {
		months = 240
	}

	option = {
		name = light_emp.12a
		add_government_power = {
				mechanic_type = emp_of_light_point_mechanic
				power_type = enlightened_prestige_points
				value = -30
			}
		set_global_flag = decree_eol_5_done
	}
}

country_event = { #AI getting decrees Number 6
	id = light_emp.13
	title = light_emp.13.test
	desc = light_emp.13.desc
	picture = CRUSADER_HORDE_eventPicture
	
	trigger = {
		ai = yes
		tag = event_target:light_empire_shield_target
		OR = {
			has_government_power = {
				mechanic_type = emp_of_light_point_mechanic
				power_type = enlightened_prestige_points
				value = 30
			}
			is_year = 1630
		}
		has_global_flag = decree_eol_5_done
	}
	mean_time_to_happen = {
		months = 240
	}

	option = {
		name = light_emp.13a
		add_government_power = {
				mechanic_type = emp_of_light_point_mechanic
				power_type = enlightened_prestige_points
				value = -30
			}
		set_global_flag = decree_eol_4_done
	}
}

country_event = { #AI getting decrees Number 6
	id = light_emp.14
	title = light_emp.14.test
	desc = light_emp.14.desc
	picture = CRUSADER_HORDE_eventPicture
	
	trigger = {
		ai = yes
		tag = event_target:light_empire_shield_target
		is_year = 1670
		is_at_war = no
		custom_trigger_tooltip = {
			tooltip = all_light_decrees_done
			has_global_flag = decree_eol_1_done
			has_global_flag = decree_eol_2_done
			has_global_flag = decree_eol_3_done
			has_global_flag = decree_eol_4_done
			has_global_flag = decree_eol_5_done
			has_global_flag = decree_eol_6_done
		}
	}
	mean_time_to_happen = {
		months = 240
	}

	option = {
		name = light_emp.14a
		override_country_name = ARJUNASAMRAJYA
		hidden_effect = {
			every_subject_country = {
				limit = {
					is_subject_of_type = light_empire_vassal
					NOT = {
						liberty_desire = 50
					}
				}
				country_event = {
					id = light_emp.3
				}
			}
			every_subject_country = {
				limit = {
					is_subject_of_type = light_empire_vassal
					liberty_desire = 50
				}	
				country_event = {
					id = light_emp.4
				}
			}
			set_country_flag = eol_completed
			clr_country_flag = open_eol_menu_flag
			remove_country_modifier = eol_1_vassal_mod
			remove_country_modifier = eol_2_vassal_mod
			remove_country_modifier = eol_3_vassal_mod
			remove_country_modifier = eol_4_vassal_mod
			remove_country_modifier = eol_5_vassal_mod
			remove_country_modifier = eol_6_vassal_mod
			remove_country_modifier = eol_7_vassal_mod
			remove_country_modifier = eol_8_vassal_mod
			remove_country_modifier = eol_9_vassal_mod
			remove_country_modifier = eol_10_vassal_mod
		}
		add_government_reform = light_empire_united_government
	}
}

country_event = { #calling all the vassals to war Defender
	id = light_emp.15
	title = light_emp.15.test
	desc = light_emp.15.desc
	picture = CRUSADER_HORDE_eventPicture
	
	is_triggered_only = yes

	option = {
		name = light_emp.15a
		ai_chance = {
			factor = 70
			modifier = {
				factor = 2
				has_global_flag = decree_eol_5_done
			}
		}
		add_government_power = {
				mechanic_type = emp_of_light_point_mechanic
				power_type = enlightened_prestige_points
				value = 5
			}
		join_all_defensive_wars_of = event_target:light_empire_shield_target
	}

	option = {
		name = light_emp.15b
		ai_chance = {
			factor = 30
		}
		add_prestige = -5
	}
}


country_event = { #calling all the vassals to war Offender
	id = light_emp.16
	title = light_emp.16.test
	desc = light_emp.16.desc
	picture = CRUSADER_HORDE_eventPicture
	
	is_triggered_only = yes

	option = {
		name = light_emp.16a
		ai_chance = {
			factor = 35
			modifier = {
				factor = 2
				has_global_flag = decree_eol_5_done
			}
		}
		add_government_power = {
				mechanic_type = emp_of_light_point_mechanic
				power_type = enlightened_prestige_points
				value = 5
			}
		join_all_offensive_wars_of = event_target:light_empire_shield_target
	}

	option = {
		name = light_emp.16b
		ai_chance = {
			factor = 65
		}
		add_prestige = -1
	}
}


country_event = { #calling all the vassals to war Offender
	id = light_emp.17
	title = light_emp.17.test
	desc = light_emp.17.desc
	picture = CRUSADER_HORDE_eventPicture
	
	trigger = {
		ai = yes
		is_subject_of = event_target:light_empire_shield_target
		has_government_power = {
				mechanic_type = emp_of_light_point_mechanic
				power_type = enlightened_prestige_points
				value = 5
			}
	}
	mean_time_to_happen = {
		months = 6
	}

	option = {
		name = light_emp.17a
		ai_chance = {
			factor = 1
		}
		trigger = {
			NOT = { has_country_modifier = eol_1_vassal_mod }
		}
		add_country_modifier = {
			name = eol_1_vassal_mod
			duration = -1
		}
	}

	option = {
		name = light_emp.17b
		ai_chance = {
			factor = 1
		}
		trigger = {
			NOT = { has_country_modifier = eol_2_vassal_mod }
		}
		add_country_modifier = {
			name = eol_2_vassal_mod
			duration = -1
		}
	}
	option = {
		name = light_emp.17c
		ai_chance = {
			factor = 1
		}
		trigger = {
			NOT = { has_country_modifier = eol_3_vassal_mod }
		}
		add_country_modifier = {
			name = eol_3_vassal_mod
			duration = -1
		}
	}

	option = {
		name = light_emp.17d
		ai_chance = {
			factor = 1
		}
		trigger = {
			NOT = { has_country_modifier = eol_4_vassal_mod }
		}
		add_country_modifier = {
			name = eol_4_vassal_mod
			duration = -1
		}
	}
	option = {
		name = light_emp.17e
		ai_chance = {
			factor = 1
		}
		trigger = {
			NOT = { has_country_modifier = eol_5_vassal_mod }
		}
		add_country_modifier = {
			name = eol_5_vassal_mod
			duration = -1
		}
	}
	option = {
		name = light_emp.17f
		ai_chance = {
			factor = 1
		}
		trigger = {
			NOT = { has_country_modifier = eol_6_vassal_mod }
		}
		add_country_modifier = {
			name = eol_6_vassal_mod
			duration = -1
		}
	}

	option = {
		name = light_emp.17g
		ai_chance = {
			factor = 1
		}
		trigger = {
			NOT = { has_country_modifier = eol_7_vassal_mod }
		}
		add_country_modifier = {
			name = eol_7_vassal_mod
			duration = -1
		}
	}
	option = {
		name = light_emp.17h
		ai_chance = {
			factor = 1
		}
		trigger = {
			NOT = { has_country_modifier = eol_8_vassal_mod }
		}
		add_country_modifier = {
			name = eol_8_vassal_mod
			duration = -1
		}
	}
	option = {
		name = light_emp.17i
		ai_chance = {
			factor = 1
		}
		trigger = {
			NOT = { has_country_modifier = eol_9_vassal_mod }
		}
		add_country_modifier = {
			name = eol_9_vassal_mod
			duration = -1
		}
	}

	option = {
		name = light_emp.17l
		ai_chance = {
			factor = 1
		}
		trigger = {
			NOT = { has_country_modifier = eol_10_vassal_mod }
		}
		add_country_modifier = {
			name = eol_10_vassal_mod
			duration = -1
		}
	}
}

country_event = { #AI becoming Emperor of Light
	id = light_emp.18
	title = light_emp.18.test
	desc = light_emp.18.desc
	picture = CRUSADER_HORDE_eventPicture
	
	trigger = {
		ai = yes
		NOT = {
				tag = event_target:light_empire_shield_target
				}
		calc_true_if = {
						amount = 7
						has_country_modifier = eol_1_vassal_mod
						has_country_modifier = eol_2_vassal_mod
						has_country_modifier = eol_3_vassal_mod
						has_country_modifier = eol_4_vassal_mod
						has_country_modifier = eol_5_vassal_mod
						has_country_modifier = eol_6_vassal_mod
						has_country_modifier = eol_7_vassal_mod
						has_country_modifier = eol_8_vassal_mod
						has_country_modifier = eol_9_vassal_mod
						has_country_modifier = eol_10_vassal_mod
					}
	}
	mean_time_to_happen = {
		months = 240
	}

	option = {
		name = light_emp.18a
		event_target:light_empire_shield_target = {
			country_event = {
					id = light_emp.5
			}
		}
	}
}

